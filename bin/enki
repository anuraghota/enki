#!/usr/bin/env python

"""
Enki. A text editor for programmers
Unix entry point. See also enki.py
"""

import sys
import os.path
import logging

"""
When script is executed from the source tree, it shall import enki package, which is one level higher.
First item in sys.path points to script location
"""
sys.path.insert(0, os.path.join(sys.path[0], '..'))

import enki.main

logging.basicConfig(filename='/tmp/enki-cpuleak',
                    level=logging.DEBUG,
                    format='%(asctime)s %(message)s')

if __name__ == '__main__':
    logging.info('Pid {} enki started argv {} working dir {}'.format(os.getpid(), sys.argv, os.getcwd()))
    res = enki.main.main()
    logging.info('Pid {} exited'.format(os.getpid()))
    print 'done'
    sys.exit(res)
